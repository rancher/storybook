(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"../shell/plugins/codemirror.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__("./node_modules/core-js/modules/es.string.search.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.string.match.js"),__webpack_require__("./node_modules/core-js/modules/es.string.trim.js"),__webpack_require__("./node_modules/core-js/modules/es.string.ends-with.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.splice.js"),__webpack_require__("./node_modules/core-js/modules/es.array.find.js");var codemirror__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../node_modules/codemirror/lib/codemirror.js"),codemirror__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(codemirror__WEBPACK_IMPORTED_MODULE_12__),_shell_utils_string__WEBPACK_IMPORTED_MODULE_29__=(__webpack_require__("../node_modules/codemirror/lib/codemirror.css"),__webpack_require__("../node_modules/codemirror/mode/yaml/yaml.js"),__webpack_require__("../node_modules/codemirror/mode/javascript/javascript.js"),__webpack_require__("../node_modules/codemirror/theme/base16-light.css"),__webpack_require__("../node_modules/codemirror/theme/base16-dark.css"),__webpack_require__("../node_modules/codemirror/keymap/vim.js"),__webpack_require__("../node_modules/codemirror/keymap/emacs.js"),__webpack_require__("../node_modules/codemirror/keymap/sublime.js"),__webpack_require__("../node_modules/codemirror/addon/lint/lint.css"),__webpack_require__("../node_modules/codemirror/addon/lint/lint.js"),__webpack_require__("../node_modules/codemirror/addon/lint/yaml-lint.js"),__webpack_require__("../node_modules/codemirror/addon/fold/foldgutter.css"),__webpack_require__("../node_modules/codemirror/addon/fold/foldgutter.js"),__webpack_require__("../node_modules/codemirror/addon/hint/show-hint.css"),__webpack_require__("../node_modules/codemirror/addon/hint/show-hint.js"),__webpack_require__("../node_modules/codemirror/addon/hint/anyword-hint.js"),__webpack_require__("../shell/utils/string.js"));function isLineComment(cm,lineNo){return/\bcomment\b/.test(cm.getTokenTypeAt(codemirror__WEBPACK_IMPORTED_MODULE_12___default.a.Pos(lineNo,0)))}function commentIndent(cm,lineNo){var text=cm.getLine(lineNo).substr(1);return-1===text.search(/\S/)?-1:codemirror__WEBPACK_IMPORTED_MODULE_12___default.a.countColumn(text,null,cm.getOption("tabSize"))}function lineIndent(cm,lineNo){var text=cm.getLine(lineNo),match=text.match(/(\s*(-\s+)?)(\S.*)/);if(!match)return-1;var spaceTo=match[1].length;return text=Object(_shell_utils_string__WEBPACK_IMPORTED_MODULE_29__.x)("",spaceTo)+match[3],/\bcomment\b/.test(cm.getTokenTypeAt(codemirror__WEBPACK_IMPORTED_MODULE_12___default.a.Pos(lineNo,spaceTo+1)))?-1:codemirror__WEBPACK_IMPORTED_MODULE_12___default.a.countColumn(text,null,cm.getOption("tabSize"))}function onCursorActivity(cm){cm.state.markedSelection&&cm.operation((function(){!function update(cm){if(!cm.somethingSelected())return clear(cm);if(cm.listSelections().length>1)return reset(cm);var from=cm.getCursor("start"),to=cm.getCursor("end"),array=cm.state.markedSelection;if(!array.length)return coverRange(cm,from,to);var coverStart=array[0].find(),coverEnd=array[array.length-1].find();if(!coverStart||!coverEnd||to.line-from.line<=CHUNK_SIZE||cmp(from,coverEnd.to)>=0||cmp(to,coverStart.from)<=0)return reset(cm);for(;cmp(from,coverStart.from)>0;)array.shift().clear(),coverStart=array[0].find();cmp(from,coverStart.from)<0&&(coverStart.to.line-from.line<CHUNK_SIZE?(array.shift().clear(),coverRange(cm,from,coverStart.to,0)):coverRange(cm,from,coverStart.from,0));for(;cmp(to,coverEnd.to)<0;)array.pop().clear(),coverEnd=array[array.length-1].find();cmp(to,coverEnd.to)>0&&(to.line-coverEnd.from.line<CHUNK_SIZE?(array.pop().clear(),coverRange(cm,coverEnd.from,to)):coverRange(cm,coverEnd.to,to))}(cm)}))}function onChange(cm){cm.state.markedSelection&&cm.state.markedSelection.length&&cm.operation((function(){clear(cm)}))}codemirror__WEBPACK_IMPORTED_MODULE_12___default.a.registerHelper("fold","indent",(function(cm,start){var myIndent=lineIndent(cm,start.line);if(!(myIndent<0)){for(var lastLineInFold=null,i=start.line+1,end=cm.lastLine();i<=end;++i){var indent=lineIndent(cm,i);if(-1===indent);else{if(!(indent>myIndent))break;lastLineInFold=i}}return lastLineInFold?{from:codemirror__WEBPACK_IMPORTED_MODULE_12___default.a.Pos(start.line,cm.getLine(start.line).length),to:codemirror__WEBPACK_IMPORTED_MODULE_12___default.a.Pos(lastLineInFold,cm.getLine(lastLineInFold).length)}:void 0}})),codemirror__WEBPACK_IMPORTED_MODULE_12___default.a.defineExtension("foldLinesMatching",(function(regex){var _this=this;this.operation((function(){for(var i=_this.firstLine(),e=_this.lastLine();i<=e;i++){_this.getLine(i).match(regex)&&_this.foldCode(codemirror__WEBPACK_IMPORTED_MODULE_12___default.a.Pos(i,0),null,"fold")}}))})),codemirror__WEBPACK_IMPORTED_MODULE_12___default.a.defineExtension("foldYaml",(function(path){var _this2=this;this.operation((function(){for(var elements=[],_loop=function _loop(){var line=_this2.getLine(i),index=function countSpaces(line){for(var i=0;i<line.length;i++)if(" "!==line[i])return i;return line.length}(line),trimmed=line.trim();if(trimmed.endsWith(":")||trimmed.endsWith(": >-")){var name=trimmed.split(":")[0].substr(0,trimmed.length-1);elements=elements.filter((function(e){return e.index<index})),elements.push({index:index,name:name});var currentPath=elements.map((function(e){return e.name})).join(".");currentPath===path&&_this2.foldCode(codemirror__WEBPACK_IMPORTED_MODULE_12___default.a.Pos(i,0),null,"fold")}},i=_this2.firstLine(),e=_this2.lastLine();i<=e;i++)_loop()}))})),codemirror__WEBPACK_IMPORTED_MODULE_12___default.a.registerHelper("fold","yamlcomments",(function(cm,start){if(isLineComment(cm,start.line)){var myIndent=commentIndent(cm,start.line);if(!(myIndent<0)){for(var lastLineInFold=null,i=start.line+1,end=cm.lastLine();i<=end&&isLineComment(cm,i);++i){var indent=commentIndent(cm,i);if(-1===indent);else{if(!(indent>myIndent))break;lastLineInFold=i}}return lastLineInFold?{from:codemirror__WEBPACK_IMPORTED_MODULE_12___default.a.Pos(start.line,cm.getLine(start.line).length),to:codemirror__WEBPACK_IMPORTED_MODULE_12___default.a.Pos(lastLineInFold,cm.getLine(lastLineInFold).length)}:void 0}}})),codemirror__WEBPACK_IMPORTED_MODULE_12___default.a.defineOption("showMarkdownLineBreaks",!1,(function(codeMirror){codeMirror.addOverlay({name:"show-markdown-line-breaks",token:function token(stream){return stream.string[stream.pos].match(/\s/)?(stream.next(),stream.pos%2==0?"markdown-single-trailing-space-even":"markdown-single-trailing-space-odd"):(stream.next(),null)}})})),codemirror__WEBPACK_IMPORTED_MODULE_12___default.a.defineOption("styleSelectedText",!1,(function(cm,val,old){var prev=old&&old!==codemirror__WEBPACK_IMPORTED_MODULE_12___default.a.Init;val&&!prev?(cm.state.markedSelection=[],cm.state.markedSelectionStyle="string"==typeof val?val:"CodeMirror-selectedtext",reset(cm),cm.on("cursorActivity",onCursorActivity),cm.on("change",onChange)):!val&&prev&&(cm.off("cursorActivity",onCursorActivity),cm.off("change",onChange),clear(cm),cm.state.markedSelection=cm.state.markedSelectionStyle=null)}));var CHUNK_SIZE=8,Pos=codemirror__WEBPACK_IMPORTED_MODULE_12___default.a.Pos,cmp=codemirror__WEBPACK_IMPORTED_MODULE_12___default.a.cmpPos;function coverRange(cm,from,to,addAt){if(0!==cmp(from,to))for(var array=cm.state.markedSelection,cls=cm.state.markedSelectionStyle,line=from.line;;){var start=line===from.line?from:Pos(line,0),endLine=line+CHUNK_SIZE,atEnd=endLine>=to.line,end=atEnd?to:Pos(endLine,0),mark=cm.markText(start,end,{className:cls});if(null==addAt?array.push(mark):array.splice(addAt++,0,mark),atEnd)break;line=endLine}}function clear(cm){for(var array=cm.state.markedSelection,i=0;i<array.length;++i)array[i].clear();array.length=0}function reset(cm){clear(cm);for(var ranges=cm.listSelections(),i=0;i<ranges.length;i++)coverRange(cm,ranges[i].from(),ranges[i].to())}}}]);