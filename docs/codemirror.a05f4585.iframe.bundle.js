"use strict";(self.webpackChunkdashboard_storybook=self.webpackChunkdashboard_storybook||[]).push([[8213],{"../shell/plugins/codemirror.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);var codemirror__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../node_modules/codemirror/lib/codemirror.js"),codemirror__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(codemirror__WEBPACK_IMPORTED_MODULE_0__),_shell_utils_string__WEBPACK_IMPORTED_MODULE_17__=(__webpack_require__("../node_modules/codemirror/lib/codemirror.css"),__webpack_require__("../node_modules/codemirror/mode/yaml/yaml.js"),__webpack_require__("../node_modules/codemirror/mode/javascript/javascript.js"),__webpack_require__("../node_modules/codemirror/theme/base16-light.css"),__webpack_require__("../node_modules/codemirror/theme/base16-dark.css"),__webpack_require__("../node_modules/codemirror/keymap/vim.js"),__webpack_require__("../node_modules/codemirror/keymap/emacs.js"),__webpack_require__("../node_modules/codemirror/keymap/sublime.js"),__webpack_require__("../node_modules/codemirror/addon/lint/lint.css"),__webpack_require__("../node_modules/codemirror/addon/lint/lint.js"),__webpack_require__("../node_modules/codemirror/addon/lint/yaml-lint.js"),__webpack_require__("../node_modules/codemirror/addon/fold/foldgutter.css"),__webpack_require__("../node_modules/codemirror/addon/fold/foldgutter.js"),__webpack_require__("../node_modules/codemirror/addon/hint/show-hint.css"),__webpack_require__("../node_modules/codemirror/addon/hint/show-hint.js"),__webpack_require__("../node_modules/codemirror/addon/hint/anyword-hint.js"),__webpack_require__("../shell/utils/string.js"));function isLineComment(cm,lineNo){return/\bcomment\b/.test(cm.getTokenTypeAt(codemirror__WEBPACK_IMPORTED_MODULE_0___default().Pos(lineNo,0)))}function commentIndent(cm,lineNo){const text=cm.getLine(lineNo).substr(1);if(-1===text.search(/\S/))return-1;return codemirror__WEBPACK_IMPORTED_MODULE_0___default().countColumn(text,null,cm.getOption("tabSize"))}function lineIndent(cm,lineNo){let text=cm.getLine(lineNo);const match=text.match(/(\s*(-\s+)?)(\S.*)/);if(!match)return-1;const spaceTo=match[1].length;return text=(0,_shell_utils_string__WEBPACK_IMPORTED_MODULE_17__.DZ)("",spaceTo)+match[3],/\bcomment\b/.test(cm.getTokenTypeAt(codemirror__WEBPACK_IMPORTED_MODULE_0___default().Pos(lineNo,spaceTo+1)))?-1:codemirror__WEBPACK_IMPORTED_MODULE_0___default().countColumn(text,null,cm.getOption("tabSize"))}function countSpaces(line){for(let i=0;i<line.length;i++)if(" "!==line[i])return i;return line.length}function onCursorActivity(cm){cm.state.markedSelection&&cm.operation((()=>{!function update(cm){if(!cm.somethingSelected())return clear(cm);if(cm.listSelections().length>1)return reset(cm);const from=cm.getCursor("start"),to=cm.getCursor("end"),array=cm.state.markedSelection;if(!array.length)return coverRange(cm,from,to);let coverStart=array[0].find(),coverEnd=array[array.length-1].find();if(!coverStart||!coverEnd||to.line-from.line<=CHUNK_SIZE||cmp(from,coverEnd.to)>=0||cmp(to,coverStart.from)<=0)return reset(cm);for(;cmp(from,coverStart.from)>0;)array.shift().clear(),coverStart=array[0].find();cmp(from,coverStart.from)<0&&(coverStart.to.line-from.line<CHUNK_SIZE?(array.shift().clear(),coverRange(cm,from,coverStart.to,0)):coverRange(cm,from,coverStart.from,0));for(;cmp(to,coverEnd.to)<0;)array.pop().clear(),coverEnd=array[array.length-1].find();cmp(to,coverEnd.to)>0&&(to.line-coverEnd.from.line<CHUNK_SIZE?(array.pop().clear(),coverRange(cm,coverEnd.from,to)):coverRange(cm,coverEnd.to,to))}(cm)}))}function onChange(cm){cm.state.markedSelection&&cm.state.markedSelection.length&&cm.operation((()=>{clear(cm)}))}codemirror__WEBPACK_IMPORTED_MODULE_0___default().registerHelper("fold","indent",((cm,start)=>{const myIndent=lineIndent(cm,start.line);if(myIndent<0)return;let lastLineInFold=null;for(let i=start.line+1,end=cm.lastLine();i<=end;++i){const indent=lineIndent(cm,i);if(-1===indent);else{if(!(indent>myIndent))break;lastLineInFold=i}}return lastLineInFold?{from:codemirror__WEBPACK_IMPORTED_MODULE_0___default().Pos(start.line,cm.getLine(start.line).length),to:codemirror__WEBPACK_IMPORTED_MODULE_0___default().Pos(lastLineInFold,cm.getLine(lastLineInFold).length)}:void 0})),codemirror__WEBPACK_IMPORTED_MODULE_0___default().defineExtension("foldLinesMatching",(function(regex){this.operation((()=>{for(let i=this.firstLine(),e=this.lastLine();i<=e;i++){this.getLine(i).match(regex)&&this.foldCode(codemirror__WEBPACK_IMPORTED_MODULE_0___default().Pos(i,0),null,"fold")}}))})),codemirror__WEBPACK_IMPORTED_MODULE_0___default().defineExtension("foldYaml",(function(path){this.operation((()=>{let elements=[];for(let i=this.firstLine(),e=this.lastLine();i<=e;i++){const line=this.getLine(i),index=countSpaces(line),trimmed=line.trim();if(trimmed.endsWith(":")||trimmed.endsWith(": >-")){const name=trimmed.split(":")[0].substr(0,trimmed.length-1);elements=elements.filter((e=>e.index<index)),elements.push({index,name});const currentPath=elements.map((e=>e.name)).join(".");currentPath===path&&this.foldCode(codemirror__WEBPACK_IMPORTED_MODULE_0___default().Pos(i,0),null,"fold")}}}))})),codemirror__WEBPACK_IMPORTED_MODULE_0___default().registerHelper("fold","yamlcomments",((cm,start)=>{if(!isLineComment(cm,start.line))return;const myIndent=commentIndent(cm,start.line);if(myIndent<0)return;let lastLineInFold=null;for(let i=start.line+1,end=cm.lastLine();i<=end&&isLineComment(cm,i);++i){const indent=commentIndent(cm,i);if(-1===indent);else{if(!(indent>myIndent))break;lastLineInFold=i}}return lastLineInFold?{from:codemirror__WEBPACK_IMPORTED_MODULE_0___default().Pos(start.line,cm.getLine(start.line).length),to:codemirror__WEBPACK_IMPORTED_MODULE_0___default().Pos(lastLineInFold,cm.getLine(lastLineInFold).length)}:void 0})),codemirror__WEBPACK_IMPORTED_MODULE_0___default().defineOption("showMarkdownLineBreaks",!1,(codeMirror=>{codeMirror.addOverlay({name:"show-markdown-line-breaks",token:stream=>stream.string[stream.pos].match(/\s/)?(stream.next(),stream.pos%2==0?"markdown-single-trailing-space-even":"markdown-single-trailing-space-odd"):(stream.next(),null)})})),codemirror__WEBPACK_IMPORTED_MODULE_0___default().defineOption("styleSelectedText",!1,((cm,val,old)=>{const prev=old&&old!==codemirror__WEBPACK_IMPORTED_MODULE_0___default().Init;val&&!prev?(cm.state.markedSelection=[],cm.state.markedSelectionStyle="string"==typeof val?val:"CodeMirror-selectedtext",reset(cm),cm.on("cursorActivity",onCursorActivity),cm.on("change",onChange)):!val&&prev&&(cm.off("cursorActivity",onCursorActivity),cm.off("change",onChange),clear(cm),cm.state.markedSelection=cm.state.markedSelectionStyle=null)}));const CHUNK_SIZE=8,Pos=codemirror__WEBPACK_IMPORTED_MODULE_0___default().Pos,cmp=codemirror__WEBPACK_IMPORTED_MODULE_0___default().cmpPos;function coverRange(cm,from,to,addAt){if(0===cmp(from,to))return;const array=cm.state.markedSelection,cls=cm.state.markedSelectionStyle;for(let line=from.line;;){const start=line===from.line?from:Pos(line,0),endLine=line+CHUNK_SIZE,atEnd=endLine>=to.line,end=atEnd?to:Pos(endLine,0),mark=cm.markText(start,end,{className:cls});if(null==addAt?array.push(mark):array.splice(addAt++,0,mark),atEnd)break;line=endLine}}function clear(cm){const array=cm.state.markedSelection;for(let i=0;i<array.length;++i)array[i].clear();array.length=0}function reset(cm){clear(cm);const ranges=cm.listSelections();for(let i=0;i<ranges.length;i++)coverRange(cm,ranges[i].from(),ranges[i].to())}},"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg==":module=>{module.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg=="},"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJFhQXEbhTg7YAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAMklEQVQI12NkgIIvJ3QXMjAwdDN+OaEbysDA4MPAwNDNwMCwiOHLCd1zX07o6kBVGQEAKBANtobskNMAAAAASUVORK5CYII=":module=>{module.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJFhQXEbhTg7YAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAMklEQVQI12NkgIIvJ3QXMjAwdDN+OaEbysDA4MPAwNDNwMCwiOHLCd1zX07o6kBVGQEAKBANtobskNMAAAAASUVORK5CYII="},"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC":module=>{module.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC"},"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII=":module=>{module.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII="},"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII=":module=>{module.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII="}}]);